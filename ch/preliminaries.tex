\chapter{Preliminaries}

\section{Set theory review}

\begin{definition}[Relation]
    A relation \(R\) on a set \(A\) is a subset of \(A \times A\). For all \(a,
    b \in A\), we would usually write \(a R b\) to denote that \((a, b) \in R\).
\end{definition}

\begin{definition}[Equivalence relation]
    An equivalence relation on a set \(A\) is a relation \(R\) on \(A\) that
    satisfies the following properties:
    \begin{enumerate}[label=(\alph*)]
        \item Reflexivity: For all \(a \in A\), \(a R a\).
        \item Symmetry: For all \(a, b \in A\), if \(a R b\), then \(b R a\).
        \item Transitivity: For all \(a, b, c \in A\), if \(a R b\) and \(b R
        c\), then \(a R c\).
    \end{enumerate}

    When \(R\) is an equivalence relation on \(A\), we would usually write \(a
    \sim b\) to denote that \(a R b\).
\end{definition}

\begin{example}
    In the set \(\R\) of real numbers, the relation \(=\) is an equivalence
    relation but \(<\) is not. In the first example (relying on our knowledge of
    \(\R\) from elementary mathematics without establishing it here), we have
    for all real numbers \(a, b, c\): (1) \(a = a\) (reflexivity), (2) if \(a =
    b\), then \(b = a\) (symmetry), and (3) if \(a = b\) and \(b = c\), then \(a
    = c\) (transitivity). As for \(<\), it is enough to observe that \(1 < 2\)
    holds but \(2 < 1\) does not.
\end{example}

\begin{example}
    Consider the set \(\Z\) of integers and define the relation
    \[
        a \sim b \text{ if and only if } n \mid (a - b) \text{ for some } n \in \Z.
    \]
    (This is congruence modulo \(n\).) We can verify that this relation is an
    equivalence relation. For all integers \(a, b, c\):
    \begin{enumerate}[label=(\alph*), itemsep=0pt, wide]
        \item Reflexivity: \(n \mid (a - a)\) for \(n = 0\).
        \item Symmetry: If \(n \mid (a - b)\), then \(n \mid (b - a)\).
        \item Transitivity: If \(n \mid (a - b)\) and \(m \mid (b - c)\), then
        \[n \mid ((a - b) + (b - c)) = (a - c).\]
    \end{enumerate}
\end{example}

\begin{definition}
    Given an equivalence relation \(\sim\) on a set \(A\), the equivalence class
    of an element \(a \in A\) is the set
    \[
        [a]_{\sim} = \{b \in A : a \sim b\}.
    \]
    We shall often drop the subscript \(\sim\) and write \([a]\) instead if the
    equivalence relation is clear from context.
\end{definition}

\begin{definition}
    A partition \(\mathcal{P}\) of a set \(A\) is a collection of nonempty
    subsets of \(A\) such that
    \begin{enumerate}[label=(\alph*)]
        \item The union of all sets in \(\mathcal{P}\) is \(A\).
        \item The intersection of any two distinct sets in \(\mathcal{P}\) is
        empty.
    \end{enumerate}
\end{definition}

\begin{theorem}
    Let \(\sim\) be an equivalence relation on a set \(A\). Then the equivalence
    classes of \(\sim\) form a partition of \(A\).
\end{theorem}

\begin{proof}
    Let \(A\) be a set and let \(\sim\) be an equivalence relation on \(A\).
    Consider the family of equivalence classes of \(\sim\) on \(A\):
    \[
        \mathcal{P}_{\sim} = \{[a]_{\sim} : a \in A\}.
    \]
    Let \([a]_{\sim} \in \mathcal{P}_{\sim}\). Then since \(\sim\) is an
    equivalence relation, we have by reflexivity, \(a \sim a\) and thus
    \([a]_{\sim}\) is not empty. Suppose \(a, b \in A\) such that \(a\not\sim
    b\) and suppose for the sake of contradiction that there exists a \(c \in
    [a]_{\sim} \cap [b]_{\sim}\). Then \(a \sim c\) and \(b \sim c\), so by
    symmetry and transitivity, \(a \sim b\), which contradicts our assumption.
    Thus the intersection of any two distinct sets in \(\mathcal{P}_{\sim}\) is
    empty. Finally, for all \(a \in A\), we have \(a \in [a]_{\sim}\) and thus
    the union of all sets in \(\mathcal{P}_{\sim}\) is \(A\). Thus
    \(\mathcal{P}_{\sim}\) is a partition of \(A\).
\end{proof}

On the other hand, given a partition \(\mathcal{P}\) of a set \(A\), we can
define an equivalence relation \(\sim\) on \(A\) such that \(\mathcal{P} =
\mathcal{P}_{\sim}\) as follows: let \(a \sim b\) if and only if there exists an
\(X \in \mathcal{P}\) such that \(a \in X\) and \(b \in X\). We can verify that
this is an equivalence relation.
\begin{enumerate}[label=(\alph*), wide, itemsep=0pt]
    \item For all \(a \in A\), \(a \sim a\) because \(a \in X\) implies \(a \in
    X \land a \in X\).
    \item For all \(a, b \in A\), if \(a \sim b\), then there exists an \(X \in
    \mathcal{P}\) such that \(a \in X\) and \(b \in X\). But this implies that
    \(b \in X\) and \(a \in X\), so \(b \sim a\).
    \item Finally, \(a \sim b\) and \(b \sim c\) implies that there exist \(X, Y
    \in \mathcal{P}\) such that \(a \in X\), \(b \in X \land b \in Y\), and \(c
    \in Y\) which implies that \(b \in X \cap Y \neq \emptyset\). Since
    \(\mathcal{P}\) is a partition, this further implies that \(X = Y\) and thus
    \(a \sim c\). Thus, \(\sim\) is transitive.
\end{enumerate}

It remains to show that \(\mathcal{P} = \mathcal{P}_{\sim}\). Now for if \(X \in
\mathcal{P}\), then for all \(a, b \in X\), there exists a \(Y \in \mathcal{P}\)
such that \(a \in Y\) and \(b \in Y\), so \(a \sim b\) and thus \(X \in
\mathcal{P}_{\sim}\) and \(\mathcal{P} \subset \mathcal{P}_{\sim}\). Conversely,
given any \([a]_{\sim} \in \mathcal{P}_{\sim}\), then there exists an \(X \in
\mathcal{P}\) such that \(a \in X\). If \(a' \in X\) then there exists a \(Y \in
\mathcal{P}\) such that \(a \in Y\) and \(a' \in Y\), so \(a \sim a'\) and thus
\(a' \in [a]_{\sim}\) and \(X \subset [a]_{\sim}\). If \(a' \in [a]_{\sim}\)
then there exists a \(Y \in \mathcal{P}\) such that \(a \in Y\) and \(a' in Y\)
and thus \(a \in X \cap Y = \emptyset\), so that \(X = Y\) and hence \(a' \in
X\). This means that \([a]_{\sim} \subset X\) and thus \([a]_{\sim} = X\) (by
the previous inclusion). Therefore both inclusions \(\mathcal{P} \subset
\mathcal{P}_{\sim}\) and \(\mathcal{P}_{\sim} \subset \mathcal{P}\) hold and
thus \(\mathcal{P} = \mathcal{P}_{\sim}\).

\begin{definition}
    The \emph{quotient} of a set \(A\) with respect to an equivalence relation
    \(\sim\) is the set of equivalence classes of \(\sim\). We denote this set
    by \(A/\sim\).
\end{definition}

\section{Set functions}

\begin{definition}
    A function \(f\) from a set \(A\) to a set \(B\) is a relation \(f \subseteq
    A \times B\) such that for all \(a \in A\), there exists a unique \(b \in
    B\) such that \((a, b) \in f\).
\end{definition}

We introduce some terminology and notation. if \((a, b) \in f\), it is
customary to write \(f(a) = b\). We call \(f(a)\) the \emph{image} of \(a\)
under \(f\). Because \(f(a) = b\) is unique, it follows immediately that if
\(a = b\) we must have \(f(a) = f(b)\). Following the convention in the
literature, we would say that \(f\) is \emph{well-defined.}

If \(f\) is a function from \(A\) to \(B\), we write
\[
    f: A \to B \text{ or } \begin{tikzcd}
        A \arrow[r, "f"] & B.
    \end{tikzcd}
\]
We call the latter a \emph{diagram}. The notation \(a \mapsto f(a)\) is also
used to explicitly define the function \(f\).

The \emph{domain} of \(f : A \to B\) is the set \(\dom f = \{a \in A : f(a)
\text{ is defined}\}\) while the \emph{codomain} of \(f\) is the set \(B\). 

If \(S \subset A\), the \emph{image} of \(S\) under \(f\) is the set
\[
    f(S) = \{f(a) : a \in S\}.
\]
If \(S = A\) then we simply write \(\img f\) for \(f(A)\). This is called
the \emph{image} of \(f\).


\begin{sectionthm}
    The function \(f\) is \emph{injective} (or \emph{one-to-one}) if for all
    \(a, b \in A\), \(f(a) = f(b)\) implies \(a = b\). The function \(f\) is
    \emph{surjective} (or \emph{onto}) if for all \(b \in B\), there exists an
    \(a \in A\) such that \(f(a) = b\). The function \(f\) is \emph{bijective}
    if it is both injective and surjective. If there exists a bijection between
    two sets \(A\) and \(B\), we say that \(A\) and \(B\) are \emph{isomorphic}
    and write
    \[
        A \cong B.
    \]

    When drawing diagrams, we would sometimes write \(\hookrightarrow\) and
    \(\twoheadrightarrow\) to emphasize that a function is injective and
    surjective, respectively.
\end{sectionthm}

\begin{remark}
    Two functions \(f: A \to B\) and \(g: A \to B\) are \emph{equal} if they
    have the same domain, codomain, and for all \(a \in A\), \(f(a) = g(a)\). We
    write \(f = g\) to denote this equality. Note that if \(f = g\) and \(f\) is
    injective (resp. surjective), then so is \(g\). Indeed if \(f = g\) is
    injective and \(f\) is injective \(f(a) = f(b)\) implies \(g(a) = f(a) =
    f(b) = g(b)\) and thus \(a = b\). Similarly if \(f = g\) is surjective and
    \(f\) is surjective, then for all \(b \in B\) there exists an \(a \in A\)
    such that \(f(a) = b\) and thus \(g(a) = f(a) = b\).
\end{remark}

\begin{sectionthm}
    If \(f: A \to B\) and \(g: B \to C\) are functions, then the
    \emph{composition} of \(f\) and \(g\) (written \(g \circ f\)) is the
    function from \(A\) to \(C\) defined by
    \[
        (g \circ f)(a) = g(f(a)),
    \]
    for all \(a \in A\). We can represent this as the diagram
    \[
        \begin{tikzcd}
            A \arrow[r, "f"'] \arrow[rr, "g \circ f", bend left] & B \arrow[r, "g"'] & C
        \end{tikzcd}
    \]
    We say that the diagram above \emph{commutes} if \(g \circ f = g(f(a))\)
    (which is precisely our definition of composition).

    We can verify that composition is associative: if \(f: A \to B\), \(g: B \to
    C\), and \(h: C \to D\), then
    \[
        h \circ (g \circ f) = (h \circ g) \circ f.
    \]
    Graphically, this is represented as the diagram
    \[
        \begin{tikzcd}
            A \arrow[rr, "f"'] \arrow[rrrr, "g \circ f", bend left] &  & B \arrow[rr, "g"'] \arrow[swap, rrrr, "h \circ g", bend right] &  & C \arrow[rr, "h"'] &  & D
        \end{tikzcd}
    \]
    which again commutes.

    Suppose now that \(g \circ f\) is an injection and assume that \(f(a) =
    f(b)\) for some \(a, b \in A\). Then
    \[
        (g \circ f)(a) = g(f(a)) = g(f(b)) = (g \circ f)(b).
    \]
    Thus \(a = b\) and \(f\) is injective. Similarly, if \(g \circ f\) is
    surjective, then for all \(c \in C\) there exists an \(a \in A\) such that
    \(g(f(a)) = c\). Since \(f\) is a function, there exists a \(b \in B\) such
    that \(f(a) = b\). Thus \(g(b) = g(f(a)) = c\) and \(g\) is surjective.
    Observe that in the first case, if \(g \circ f\) is injective we have shown
    that the function applied first (i.e., \(f\)) is injective, while in the
    second case we have shown that the function applied last (i.e., \(g\)) is
    surjective.
\end{sectionthm}

\begin{sectionthm}
    For each set \(A\) we can define the function
    \[
        \id_A: A \to A
    \]
    which sends each element \(a \in A\) to itself. This is called the
    \emph{identity function} on \(A\). We can verify that the diagrams
    \[
        \begin{tikzcd}
            A \arrow[r, "f"'] \arrow[rr, "f", bend left] & B \arrow[r, "\id_B"'] & B & \text{and}& A \arrow[r, "\id_A"'] \arrow[rr, "f", bend left] & A \arrow[r, "f"'] & B
        \end{tikzcd}
    \]
    commute; i.e.,
    \[
        f \circ \id_A = f = \id_B \circ f.
    \]

    We can immediately verify that the identity function is a bijection.
\end{sectionthm}

\begin{sectionthm}
    Suppose \(f : A \to B\) is a bijection. Then since \(f\) is surjective, for
    all \(b \in B\) there exists a unique \(a \in A\) such that \(f(a) = b\).
    Since \(f\) is injective as well, this \(a\) is unique. Recall that the
    (graph of the) function \(f\) is the set
    \[
        \{(a, b) \in A \times B : f(a) = b\}.
    \]
    Thus the set of ordered pairs \((b, a)\) is also well-defined as a function.
    Call this function \(g : B \to A\) defined by \(g(b) = a\) when \(f(a) =
    b\). The function \(g\) is such that the diagrams
    \[
        \begin{tikzcd}
            A \arrow[r, "f"'] \arrow[rr, "\id_A", bend left] & B \arrow[r, "g"'] & A & \text{and}& B \arrow[r, "g"'] \arrow[rr, "\id_B", bend left] & A \arrow[r, "f"'] & B
        \end{tikzcd}
    \]
    commute; i.e.,
    \[
        g \circ f = \id_A \text{ and } f \circ g = \id_B.
    \]
    The identity on the left tells us that \(g\) is a \emph{left inverse} of
    \(f\), while the identity on the right tells us that \(g\) is a \emph{right
    inverse} of \(f\). A function \(g\) satisfying both identities is called an
    \emph{inverse} of \(f\).

    Now suppose \(h\) is another function such that \(h \circ f = \id_A\) and
    \(f \circ h = \id_B\). Then
    \[
        g = g \circ \id_B = g \circ (f \circ h) = (g \circ f) \circ h = \id_A \circ h = h.
    \]
    Thus the inverse of a bijection is unique and we can speak of \emph{the}
    inverse of a bijection \(f\). We would usually denote this inverse by
    \(f^{-1}\). Now does the converse hold? That is, if \(f\) has an inverse, is
    \(f\) a bijection?
\end{sectionthm}

\begin{theorem}
    Let \(f: A \to B\) with \(A \neq \emptyset\). Then
    \begin{enumerate}[label=(\alph*)]
        \item \(f\) is injective if and only if it has a left inverse; and
        \item \(f\) is surjective if and only if it has a right inverse.
    \end{enumerate}
\end{theorem}

\begin{corollary}
    A function \(f: A \to B\) is a bijection if and only if it has an inverse.
\end{corollary}

\begin{proof}\(\)

    \begin{enumerate}[label=(\alph*), wide]
        \item Suppose \(f\) is injective. Fix some element \(s \in A\) (this is
        possible because \(A \neq \emptyset\) by assumption) and define the
        function \(g : B \to A\) by
        \[
            g(b) = \begin{cases}
                a & \text{if } f(a) = b, \\
                s & \text{if } b \notin \img f.
            \end{cases}
        \]
        Since \(f\) is injective, every \(b\) that is the image of some \(a \in
        A\) is the image of a unique \(a\) and thus \(g\) is well-defined. For
        all \(a \in A\),
        \[
            (g \circ f)(a) = g(f(a)) = a = \id_A(a).
        \]
        Thus \(g\) is a left inverse of \(f\).

        Conversely, suppose \(f\) has a left inverse \(g : B \to A\) with \(g
        \circ f = \id_A\). Let \(a, b \in A\) with \(a \neq b\). Then
        \[
            (g \circ f)(a) = \id_A(a) = a \neq b = \id_A(b) = (g \circ f)(b).
        \]
        This implies that \(f(a) \neq f(b)\) and thus \(f\) is injective.

        \item Suppose \(f\) is surjective. Then for all \(b \in B\), there
        exists an \(a \in A\) such that \(f(a) = b\). Define the function \(g :
        B \to A\) by sending each \(b \in B\) to some \(a \in A\) such that
        \(f(a) = b\). Since \(A \neq \emptyset\) and \(a\) need not be unique, we use the axiom of choice
        to select a unique \(a\) for each \(b\) in an arbitrary way. (We cannot
        let \(g(b)\) be a set of all \(a\) such that \(f(a) = b\) because then
        \(g\) would not be a function.) Then for all \(b \in B\),
        \[
            (f \circ g)(b) = f(g(b)) = f(a) = b = \id_B(b).
        \]
        Thus \(g\) is a right inverse of \(f\).

        Conversely, suppose \(f\) has a right inverse \(g : B \to A\) with \(f
        \circ g = \id_B\). Because \(\id_B\) is bijective (and hence
        surjective), \(f \circ g\) must be surjective and so must \(f\). This
        completes the proof.
    \end{enumerate}
\end{proof}

\begin{remark}
    The second part of the preceding proof require the axiom of choice. We also
    note that as we have seen in construction in the proof, the left and right
    inverses of a function are not unique.

    Another observation must be made: thus far our definition of injectivity and surjectivity relies on the property of sets consisting of `elements'. It is natural to ask then whether we can define these properties in a more general setting, i.e., without relying on the notion of elements and simply looking at the properties of the functions themselves. This is the motivation for the following definition.
\end{remark}

\begin{definition}
    A function \(f: A \to B\) is a \emph{monomorphism} (or \emph{monic}) if for
    all sets \(X\) and all functions \(\alpha, \beta: X \to A\), if \(f \circ
    \alpha = f \circ \beta\), then \(\alpha = \beta\). Similarly \(f\) is an
    \emph{epimorphism} (or \emph{epic}) if for all sets \(Y\) and all functions
    \(\gamma, \delta: B \to Y\), if \(\gamma \circ f = \delta \circ f\), then
    \(\gamma = \delta\).
\end{definition}

\begin{theorem}
    A function \(f: A \to B\) is injective if and only if it is a monomorphism.
    Similarly, \(f\) is surjective if and only if it is an epimorphism.
\end{theorem}

\begin{proof}
    Suppose \(f\) is injective. If \(A\) is empty then for all sets \(X\) there is no function \(\alpha: X \to A\), so the statement is vacuously true. We can then assume that \(A\) is nonempty. Then \(f\) has a left inverse \(g\) and for all sets \(X\) and all functions \(\alpha, \beta: X \to A\), if \(f \circ \alpha = f \circ \beta\),
    then 
    \[
        (g \circ f)\circ \alpha = (g \circ f) \circ \beta.
    \]
    But since \(g\) is a left inverse of \(f\), we have
    \[
        \id_A \circ\,\alpha = \id_A \circ\,\beta,
    \]
    from which we conclude that \(\alpha = \beta\). Thus \(f\) is a monomorphism. 
    
    Conversely, suppose \(f\) is a monomorphism. Then for all sets \(X\) and all functions \(\alpha, \beta: X \to A\), if \(f \circ \alpha = f \circ \beta\), then \(\alpha = \beta\). We need to show that for all \(a, b \in A\), if \(a \neq b\) then \(f(a) \neq f(b)\). Since the monomorphism property holds for all sets \(X\), we can take \(X = \{*\}\) and the functions \(\alpha, \beta: \{*\} \to A\) defined by \(\alpha(*) = a\) and \(\beta(*) = b\), with \(a \neq b\). This ensures that \(\alpha \neq \beta\) and thus \(f \circ \alpha \neq f \circ \beta\). But \(f \circ \alpha = f(a)\) and \(f \circ \beta = f(b)\), so we have \(f(a) \neq f(b)\) and thus \(f\) is injective.

    On the other hand, suppose \(f\) is surjective. Then if \(\gamma, \delta: B \to Y\) are functions such that \(\gamma \circ f = \delta \circ f\), then since \(f\) is surjective, for all \(b \in B\) there exists an \(a \in A\) such that \(f(a) = b\) and thus \(\gamma(b) = \gamma(f(a)) = \delta(f(a)) = \delta(b)\). This implies that \(\gamma = \delta\) and thus \(f\) is an epimorphism.

    Conversely, suppose \(f\) is an epimorphism. That is, for all sets \(Y\) and all functions \(\gamma, \delta: B \to Y\), if \(\gamma \circ f = \delta \circ f\), then \(\gamma = \delta\). Suppose that \(f\) is not surjective, i.e., \(\img f \neq B\). Let \(\gamma, \delta: B \to Y\) be functions that are equal for all \(b \in \img f\) but differ for some \(b \notin \img f\). Then \(\gamma \circ f = \delta \circ f\) but \(\gamma \neq \delta\), which contradicts the assumption that \(f\) is an epimorphism. Thus \(f\) is surjective.
\end{proof}

\begin{sectionthm}
    We review some examples of functions arising from basic set operations. We can rephrase our definition of set inclusion as a function. Given two sets \(A\) and \(B\) with \(A \subset B\), we call
    \[
        \iota: A \to B
    \]
    the \emph{inclusion function} defined by \(\iota(a) = a\) for all \(a \in A\). This is clearly injective. This function sends each element of \(A\) to itself as an element of \(B\). A more descriptive name for this function is the \emph{embedding} of \(A\) in \(B\).

    Given two sets \(A\) and \(B\) and their product \(A \times B\), the maps
    \[
        \begin{tikzcd}
            & A\times B \arrow[ld, "\pi_a"'] \arrow[rd, "\pi_b"] &   \\
          A &                                                    & B
          \end{tikzcd}
    \]
    defined by
    \[
        \pi_a(a, b) = a \text{ and } \pi_b(a, b) = b
    \]
    are called the \emph{projection maps} from \(A \times B\) to \(A\) and \(B\), respectively. These are surjective functions.
\end{sectionthm}